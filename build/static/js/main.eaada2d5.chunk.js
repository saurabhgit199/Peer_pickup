(this["webpackJsonppeer-port"]=this["webpackJsonppeer-port"]||[]).push([[0],{14:function(e,t,s){},29:function(e,t,s){},30:function(e,t,s){},31:function(e,t,s){},33:function(e,t,s){"use strict";s.r(t);var c=s(3),n=s.n(c),a=s(15),i=s.n(a),r=s(16),o=s(8),l=s(4);const j=Object(r.a)({apiKey:"AIzaSyCmSEgyaYato1bzHVHnxjkuyc7-USWBZnQ",authDomain:"peer-port.firebaseapp.com",projectId:"peer-port",storageBucket:"peer-port.appspot.com",messagingSenderId:"84932371825",appId:"1:84932371825:web:b86de38dce7cf7477f02d0",measurementId:"G-NP26W6ZQMY"}),d=Object(o.c)(j),u=new o.a,b=Object(l.e)(j);s(29),s(30),s(31);var h=s(1);const O=e=>{let{requestId:t,onClose:s}=e;const[n,a]=Object(c.useState)([]),[i,r]=Object(c.useState)(""),o=Object(l.b)(b,"privateChats");Object(c.useEffect)((()=>{const e=Object(l.h)(o,Object(l.k)("requestId","==",t)),s=Object(l.f)(e,(e=>{const t=[];e.forEach((e=>{t.push({...e.data(),id:e.id})})),a(t)}));return()=>s()}),[t]);return Object(h.jsxs)("div",{className:"private-chat",children:[Object(h.jsxs)("div",{className:"private-chat-header",children:[Object(h.jsx)("h2",{children:"Private Chat"}),Object(h.jsx)("button",{className:"close-chat",onClick:s,children:"Close"})]}),Object(h.jsx)("div",{className:"private-chat-messages",children:n.map((e=>Object(h.jsxs)("div",{className:"private-chat-message "+(e.user===d.currentUser.displayName?"sent":"received"),children:[Object(h.jsxs)("strong",{children:[e.user,":"]})," ",e.text]},e.id)))}),Object(h.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),""!==i&&(await Object(l.a)(o,{text:i,createdAt:new Date,user:d.currentUser.displayName,requestId:t}),r(""))},className:"private-chat-form",children:[Object(h.jsx)("input",{type:"text",value:i,onChange:e=>r(e.target.value),className:"private-chat-input",placeholder:"Type your message..."}),Object(h.jsx)("button",{type:"submit",className:"private-chat-send-button",children:"Send"})]})]})},p=e=>{let{room:t}=e;const[s,n]=Object(c.useState)([]),[a,i]=Object(c.useState)(""),[r,o]=Object(c.useState)(!1),[j,u]=Object(c.useState)(null),[p,m]=Object(c.useState)(null),[x,g]=Object(c.useState)({heading:"",items:[],logisticsFees:"",pickupLocation:"",dropLocation:""}),[v,f]=Object(c.useState)(""),[y,N]=Object(c.useState)(!1),[C,k]=Object(c.useState)(null),I=Object(l.b)(b,"messages");Object(c.useEffect)((()=>{const e=Object(l.h)(I,Object(l.k)("room","==",t),Object(l.g)("createdAt")),s=Object(l.f)(e,(e=>{let t=[];e.forEach((e=>{t.push({...e.data(),id:e.id})})),n(t)}));return()=>s()}),[t]);return Object(h.jsxs)("div",{className:"chat-app",children:[Object(h.jsx)("div",{className:"header",children:Object(h.jsxs)("h1",{children:["Welcome to: ",t.toUpperCase()]})}),Object(h.jsx)("div",{className:"messages",children:s.map((e=>Object(h.jsxs)("div",{className:"message "+(e.fulfilled?"fulfilled":e.text.startsWith("I Want")?"i-want":"i-can-get"),onClick:()=>{e.text.startsWith("I Want")&&u(e.id)},children:[Object(h.jsxs)("span",{className:"user",children:[e.user,":"]}),Object(h.jsx)("div",{className:"message-text",children:e.text}),e.text.startsWith("I Want")&&Object(h.jsxs)("div",{className:"message-actions",children:[Object(h.jsx)("button",{className:"fulfill-button",onClick:t=>{t.stopPropagation(),(async e=>{const t=Object(l.c)(b,"messages",e);await Object(l.j)(t,{fulfilled:!0}),k(e),N(!0)})(e.id)},children:"Fulfill"}),Object(h.jsx)("button",{className:"view-details-button",onClick:t=>{var s;t.stopPropagation(),s=e.id,m(p===s?null:s)},children:p===e.id?"Hide Details":"View Details"}),Object(h.jsx)("button",{className:"chat-button",onClick:t=>{var s;t.stopPropagation(),s=e.id,k(s),N(!0)},children:"Chat"})]}),p===e.id&&e.requestDetails&&Object(h.jsxs)("div",{className:"message-details",children:[Object(h.jsxs)("p",{children:[Object(h.jsx)("strong",{children:"Heading:"})," ",e.requestDetails.heading]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("strong",{children:"Items:"})," ",e.requestDetails.items.join(", ")]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("strong",{children:"Logistics Fees:"})," ",e.requestDetails.logisticsFees]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("strong",{children:"Pickup Location:"})," ",e.requestDetails.pickupLocation]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("strong",{children:"Drop Location:"})," ",e.requestDetails.dropLocation]})]})]},e.id)))}),Object(h.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),""!==a&&(await Object(l.a)(I,{text:a,createdAt:Object(l.i)(),user:d.currentUser.displayName,room:t}),i(""))},className:"new-message-form",children:[Object(h.jsx)("input",{type:"text",value:a,onChange:e=>i(e.target.value),className:"new-message-input",placeholder:"Type your message here..."}),Object(h.jsx)("button",{type:"submit",className:"send-button",children:"Send"}),Object(h.jsx)("button",{type:"button",className:"request-button",onClick:()=>{o(!0),u(null)},children:"I Want"}),Object(h.jsx)("button",{type:"button",className:"i-can-get-button",onClick:()=>{i("")},children:"I Can Get"})]}),r&&Object(h.jsxs)("div",{className:"request-form",children:[Object(h.jsx)("h2",{children:"Request Details"}),Object(h.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),""===x.heading)return;await Object(l.a)(I,{text:`I Want: ${x.heading}`,createdAt:Object(l.i)(),user:d.currentUser.displayName,room:t,requestDetails:x});g({heading:"",items:[],logisticsFees:"",pickupLocation:"",dropLocation:""}),f(""),o(!1)},children:[Object(h.jsxs)("label",{children:["Heading:",Object(h.jsx)("input",{type:"text",value:x.heading,onChange:e=>g({...x,heading:e.target.value})})]}),Object(h.jsxs)("label",{children:["Items:",Object(h.jsx)("input",{type:"text",value:v,onChange:e=>{f(e.target.value)},placeholder:"Enter item name"}),Object(h.jsx)("button",{type:"button",onClick:()=>{v&&(g((e=>({...e,items:[...e.items,v]}))),f(""))},children:"Add Item"}),Object(h.jsx)("ul",{children:x.items.map(((e,t)=>Object(h.jsx)("li",{children:e},t)))})]}),Object(h.jsxs)("label",{children:["Logistics Fees:",Object(h.jsx)("input",{type:"text",value:x.logisticsFees,onChange:e=>g({...x,logisticsFees:e.target.value})})]}),Object(h.jsxs)("label",{children:["Pickup Location:",Object(h.jsx)("input",{type:"text",value:x.pickupLocation,onChange:e=>g({...x,pickupLocation:e.target.value})})]}),Object(h.jsxs)("label",{children:["Drop Location:",Object(h.jsx)("input",{type:"text",value:x.dropLocation,onChange:e=>g({...x,dropLocation:e.target.value})})]}),Object(h.jsx)("button",{type:"submit",children:"Submit Request"}),Object(h.jsx)("button",{type:"button",onClick:()=>o(!1),children:"Cancel"})]})]}),y&&Object(h.jsx)(O,{requestId:C,onClose:()=>{N(!1)}})]})};s(14);var m=s(17),x=s.n(m),g=s.p+"static/media/logo-white.553a5d8e.png";const v=x.a,f=e=>{let{setIsAuth:t}=e;console.log("Auth component rendered");return Object(h.jsxs)("div",{className:"auth",children:[Object(h.jsxs)("div",{className:"logo-container",children:[Object(h.jsx)("div",{className:"logo-title",children:"Peer-Port"}),Object(h.jsx)("img",{src:g,alt:"Logo",className:"logo"})]}),Object(h.jsx)("p",{children:"Sign In With Google To Continue"}),Object(h.jsx)("button",{onClick:async()=>{try{const e=await Object(o.e)(d,u);v.set("auth-token",e.user.refreshToken),t(!0)}catch(e){console.error(e)}},children:"Sign In With Google"}),Object(h.jsxs)("form",{onSubmit:e=>{e.preventDefault();(async(e,s)=>{try{const c=await Object(o.d)(d,e,s);v.set("auth-token",c.user.refreshToken),t(!0)}catch(c){console.error(c)}})(e.target.email.value,e.target.password.value)},children:[Object(h.jsx)("h3",{children:"Sign In"}),Object(h.jsx)("input",{type:"email",name:"email",placeholder:"Email",required:!0}),Object(h.jsx)("input",{type:"password",name:"password",placeholder:"Password",required:!0}),Object(h.jsx)("button",{type:"submit",children:"Sign In"})]}),Object(h.jsxs)("div",{className:"instructions-container",children:[Object(h.jsx)("h2",{className:"instructions-header",children:"How to Use the App"}),Object(h.jsxs)("ul",{className:"instructions-list",children:[Object(h.jsxs)("li",{children:["Enter your credentials and click ",Object(h.jsx)("strong",{children:'"Sign in with Google"'}),"."]}),Object(h.jsx)("li",{children:"Enter the locality name or institute name in the room to join your peer community."}),Object(h.jsxs)("li",{children:["If you need to transport or get something delivered, or want to go to another area of your city, ask your peers by posting your request by clicking on the ",Object(h.jsx)("strong",{children:'"I want"'})," button in the room."]}),Object(h.jsx)("li",{children:"Decide the amount of fees you can offer for the service."}),Object(h.jsx)("li",{children:"If you're visiting or passing by another location, check the requests to see if you can help."}),Object(h.jsxs)("li",{children:["Click on the ",Object(h.jsx)("strong",{children:'"Fulfill"'})," button to offer your service and earn cash."]}),Object(h.jsxs)("li",{children:["Complete the delivery, receive the agreed-upon fee, and reduce the carbon footprint by using ",Object(h.jsx)("strong",{children:"Peer-Port, the peer transport platform."})]})]})]})]})};var y=s(11);const N=new y.a,C=e=>{let{children:t,isAuth:s,setIsAuth:c,setIsInChat:n}=e;return Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)("div",{className:"app-header",children:Object(h.jsx)("h1",{children:" Peer-port"})}),Object(h.jsx)("div",{className:"app-container",children:t}),s&&Object(h.jsx)("div",{className:"sign-out",children:Object(h.jsx)("button",{onClick:async()=>{await Object(o.f)(d),N.remove("auth-token"),c(!1),n(!1)},children:" Sign Out"})})]})},k=new y.a;var I=function(){const[e,t]=Object(c.useState)(k.get("auth-token")),[s,n]=Object(c.useState)(!1),[a,i]=Object(c.useState)(""),[r,o]=Object(c.useState)([]);return Object(c.useEffect)((()=>{if(e){(async()=>{const e=d.currentUser;if(e){const t=Object(l.b)(b,"users",e.uid,"rooms"),s=Object(l.h)(t),c=(await Object(l.d)(s)).docs.map((e=>e.data().name));o(c)}})()}}),[e]),e?Object(h.jsx)(C,{isAuth:e,setIsAuth:t,setIsInChat:n,children:s?Object(h.jsx)(p,{room:a}):Object(h.jsxs)("div",{className:"room",children:[Object(h.jsx)("label",{children:"Type room name:"}),Object(h.jsx)("input",{onChange:e=>i(e.target.value)}),Object(h.jsx)("button",{onClick:async()=>{if(a){const e=d.currentUser;if(e){const t=Object(l.b)(b,"users",e.uid,"rooms");await Object(l.a)(t,{name:a}),o([...r,a]),n(!0)}}},children:"Enter Chat"}),Object(h.jsx)("div",{className:"joined-rooms",children:r.length>0&&Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Joined Rooms:"}),Object(h.jsx)("ul",{children:r.map(((e,t)=>Object(h.jsxs)("li",{children:[e,Object(h.jsx)("button",{onClick:()=>(i(e),void n(!0)),children:"Enter Room"})]},t)))})]})})]})}):Object(h.jsx)(C,{isAuth:e,setIsAuth:t,setIsInChat:n,children:Object(h.jsx)(f,{setIsAuth:t})})};i.a.createRoot(document.getElementById("root")).render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(I,{})}))}},[[33,1,2]]]);
//# sourceMappingURL=main.eaada2d5.chunk.js.map