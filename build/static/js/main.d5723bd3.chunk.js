(this["webpackJsonppeer-port"]=this["webpackJsonppeer-port"]||[]).push([[0],{14:function(e,t,s){},29:function(e,t,s){},30:function(e,t,s){},32:function(e,t,s){"use strict";s.r(t);var c=s(3),n=s.n(c),i=s(15),a=s.n(i),o=s(16),r=s(8),l=s(5);const j=Object(o.a)({apiKey:"AIzaSyCmSEgyaYato1bzHVHnxjkuyc7-USWBZnQ",authDomain:"peer-port.firebaseapp.com",projectId:"peer-port",storageBucket:"peer-port.appspot.com",messagingSenderId:"84932371825",appId:"1:84932371825:web:b86de38dce7cf7477f02d0",measurementId:"G-NP26W6ZQMY"}),d=Object(r.c)(j),u=new r.a,b=Object(l.e)(j);s(29),s(30);var h=s(1);const p=e=>{let{room:t}=e;const[s,n]=Object(c.useState)([]),[i,a]=Object(c.useState)(""),[o,r]=Object(c.useState)(!1),[j,u]=Object(c.useState)(null),[p,O]=Object(c.useState)(null),[m,x]=Object(c.useState)({heading:"",items:[],logisticsFees:"",pickupLocation:"",dropLocation:""}),[g,f]=Object(c.useState)(""),y=Object(l.b)(b,"messages");Object(c.useEffect)((()=>{const e=Object(l.h)(y,Object(l.k)("room","==",t),Object(l.g)("createdAt")),s=Object(l.f)(e,(e=>{let t=[];e.forEach((e=>{t.push({...e.data(),id:e.id})})),n(t)}));return()=>s()}),[t]);return Object(h.jsxs)("div",{className:"chat-app",children:[Object(h.jsx)("div",{className:"header",children:Object(h.jsxs)("h1",{children:["Welcome to: ",t.toUpperCase()]})}),Object(h.jsx)("div",{className:"messages",children:s.map((e=>Object(h.jsxs)("div",{className:"message "+(e.fulfilled?"fulfilled":e.text.startsWith("I Want")?"i-want":"i-can-get"),onClick:()=>{e.text.startsWith("I Want")&&u(e.id)},children:[Object(h.jsxs)("span",{className:"user",children:[e.user,":"]}),Object(h.jsx)("div",{className:"message-text",children:e.text}),e.text.startsWith("I Want")&&!e.fulfilled&&Object(h.jsxs)("div",{className:"message-actions",children:[Object(h.jsx)("button",{className:"fulfill-button",onClick:t=>{t.stopPropagation(),(async e=>{const t=Object(l.c)(b,"messages",e);await Object(l.j)(t,{fulfilled:!0})})(e.id)},children:"Fulfill"}),Object(h.jsx)("button",{className:"view-details-button",onClick:t=>{var s;t.stopPropagation(),s=e.id,O(p===s?null:s)},children:p===e.id?"Hide Details":"View Details"})]}),p===e.id&&e.requestDetails&&Object(h.jsxs)("div",{className:"message-details",children:[Object(h.jsxs)("p",{children:[Object(h.jsx)("strong",{children:"Heading:"})," ",e.requestDetails.heading]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("strong",{children:"Items:"})," ",e.requestDetails.items.join(", ")]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("strong",{children:"Logistics Fees:"})," ",e.requestDetails.logisticsFees]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("strong",{children:"Pickup Location:"})," ",e.requestDetails.pickupLocation]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("strong",{children:"Drop Location:"})," ",e.requestDetails.dropLocation]})]})]},e.id)))}),Object(h.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),""!==i&&(await Object(l.a)(y,{text:i,createdAt:Object(l.i)(),user:d.currentUser.displayName,room:t}),a(""))},className:"new-message-form",children:[Object(h.jsx)("input",{type:"text",value:i,onChange:e=>a(e.target.value),className:"new-message-input",placeholder:"Type your message here..."}),Object(h.jsx)("button",{type:"submit",className:"send-button",children:"Send"}),Object(h.jsx)("button",{type:"button",className:"request-button",onClick:()=>{r(!0),u(null)},children:"I Want"}),Object(h.jsx)("button",{type:"button",className:"i-can-get-button",onClick:()=>{a("")},children:"I Can Get"})]}),o&&Object(h.jsxs)("div",{className:"request-form",children:[Object(h.jsx)("h2",{children:"Request Details"}),Object(h.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),""!==m.heading&&(await Object(l.a)(y,{text:`I Want: ${m.heading}`,createdAt:Object(l.i)(),user:d.currentUser.displayName,room:t,requestDetails:m}),x({heading:"",items:[],logisticsFees:"",pickupLocation:"",dropLocation:""}),f(""),r(!1))},children:[Object(h.jsxs)("label",{children:["What do you want:",Object(h.jsx)("input",{type:"text",value:m.heading,onChange:e=>x({...m,heading:e.target.value}),placeholder:"What do you want?"})]}),Object(h.jsxs)("label",{children:["List of items required:",Object(h.jsx)("input",{type:"text",value:g,onChange:e=>{f(e.target.value)},placeholder:"Add an item"}),Object(h.jsx)("button",{type:"button",onClick:()=>{g&&(x((e=>({...e,items:[...e.items,g]}))),f(""))},children:"Add Item"}),Object(h.jsx)("ul",{children:m.items.map(((e,t)=>Object(h.jsx)("li",{children:e},t)))})]}),Object(h.jsxs)("label",{children:["Logistics fees offered:",Object(h.jsx)("input",{type:"text",value:m.logisticsFees,onChange:e=>x({...m,logisticsFees:e.target.value})})]}),Object(h.jsxs)("label",{children:["Pickup location:",Object(h.jsx)("input",{type:"text",value:m.pickupLocation,onChange:e=>x({...m,pickupLocation:e.target.value})})]}),Object(h.jsxs)("label",{children:["Drop location:",Object(h.jsx)("input",{type:"text",value:m.dropLocation,onChange:e=>x({...m,dropLocation:e.target.value})})]}),Object(h.jsx)("button",{type:"submit",className:"submit-button",children:"Submit"}),Object(h.jsx)("button",{type:"button",className:"close-button",onClick:()=>r(!1),children:"Close"})]})]})]})};s(14);var O=s(17),m=s.n(O),x=s.p+"static/media/logo-white.553a5d8e.png";const g=m.a,f=e=>{let{setIsAuth:t}=e;console.log("Auth component rendered");return Object(h.jsxs)("div",{className:"auth",children:[Object(h.jsxs)("div",{className:"logo-container",children:[Object(h.jsx)("div",{className:"logo-title",children:"Peer-Port"}),Object(h.jsx)("img",{src:x,alt:"Logo",className:"logo"})]}),Object(h.jsx)("p",{children:"Sign In With Google To Continue"}),Object(h.jsx)("button",{onClick:async()=>{try{const e=await Object(r.e)(d,u);g.set("auth-token",e.user.refreshToken),t(!0)}catch(e){console.error(e)}},children:"Sign In With Google"}),Object(h.jsxs)("form",{onSubmit:e=>{e.preventDefault();(async(e,s)=>{try{const c=await Object(r.d)(d,e,s);g.set("auth-token",c.user.refreshToken),t(!0)}catch(c){console.error(c)}})(e.target.email.value,e.target.password.value)},children:[Object(h.jsx)("h3",{children:"Sign In"}),Object(h.jsx)("input",{type:"email",name:"email",placeholder:"Email",required:!0}),Object(h.jsx)("input",{type:"password",name:"password",placeholder:"Password",required:!0}),Object(h.jsx)("button",{type:"submit",children:"Sign In"})]}),Object(h.jsxs)("div",{className:"instructions-container",children:[Object(h.jsx)("h2",{className:"instructions-header",children:"How to Use the App"}),Object(h.jsxs)("ul",{className:"instructions-list",children:[Object(h.jsxs)("li",{children:["Enter your credentials and click ",Object(h.jsx)("strong",{children:'"Sign in with Google"'}),"."]}),Object(h.jsx)("li",{children:"Enter the locality name or institute name in the room to join your peer community."}),Object(h.jsxs)("li",{children:["If you need to transport or get something delivered, or want to go to another area of your city, ask your peers by posting your request by clicking on the ",Object(h.jsx)("strong",{children:'"I want"'})," button in the room."]}),Object(h.jsx)("li",{children:"Decide the amount of fees you can offer for the service."}),Object(h.jsx)("li",{children:"If you're visiting or passing by another location, check the requests to see if you can help."}),Object(h.jsxs)("li",{children:["Click on the ",Object(h.jsx)("strong",{children:'"Fulfill"'})," button to offer your service and earn cash."]}),Object(h.jsxs)("li",{children:["Complete the delivery, receive the agreed-upon fee, and reduce the carbon footprint by using ",Object(h.jsx)("strong",{children:"Peer-Port, the peer transport platform."})]})]})]})]})};var y=s(11);const v=new y.a,k=e=>{let{children:t,isAuth:s,setIsAuth:c,setIsInChat:n}=e;return Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)("div",{className:"app-header",children:Object(h.jsx)("h1",{children:" Peer-port"})}),Object(h.jsx)("div",{className:"app-container",children:t}),s&&Object(h.jsx)("div",{className:"sign-out",children:Object(h.jsx)("button",{onClick:async()=>{await Object(r.f)(d),v.remove("auth-token"),c(!1),n(!1)},children:" Sign Out"})})]})},N=new y.a;var I=function(){const[e,t]=Object(c.useState)(N.get("auth-token")),[s,n]=Object(c.useState)(!1),[i,a]=Object(c.useState)(""),[o,r]=Object(c.useState)([]);return Object(c.useEffect)((()=>{if(e){(async()=>{const e=d.currentUser;if(e){const t=Object(l.b)(b,"users",e.uid,"rooms"),s=Object(l.h)(t),c=(await Object(l.d)(s)).docs.map((e=>e.data().name));r(c)}})()}}),[e]),e?Object(h.jsx)(k,{isAuth:e,setIsAuth:t,setIsInChat:n,children:s?Object(h.jsx)(p,{room:i}):Object(h.jsxs)("div",{className:"room",children:[Object(h.jsx)("label",{children:"Type room name:"}),Object(h.jsx)("input",{onChange:e=>a(e.target.value)}),Object(h.jsx)("button",{onClick:async()=>{if(i){const e=d.currentUser;if(e){const t=Object(l.b)(b,"users",e.uid,"rooms");await Object(l.a)(t,{name:i}),r([...o,i]),n(!0)}}},children:"Enter Chat"}),Object(h.jsx)("div",{className:"joined-rooms",children:o.length>0&&Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Joined Rooms:"}),Object(h.jsx)("ul",{children:o.map(((e,t)=>Object(h.jsxs)("li",{children:[e,Object(h.jsx)("button",{onClick:()=>(a(e),void n(!0)),children:"Enter Room"})]},t)))})]})})]})}):Object(h.jsx)(k,{isAuth:e,setIsAuth:t,setIsInChat:n,children:Object(h.jsx)(f,{setIsAuth:t})})};a.a.createRoot(document.getElementById("root")).render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(I,{})}))}},[[32,1,2]]]);
//# sourceMappingURL=main.d5723bd3.chunk.js.map